{"version":3,"sources":["../../src/tests/auth.test.ts"],"sourcesContent":["import request from 'supertest';\nimport App from '@/app';\nimport { CreateUserDto } from '@dtos/users.dto';\nimport AuthRoute from '@routes/auth.route';\n\nafterAll(async () => {\n  await new Promise<void>(resolve => setTimeout(() => resolve(), 500));\n});\n\ndescribe('Testing Auth', () => {\n  describe('[POST] /signup', () => {\n    it('response should have the Create userData', () => {\n      const userData: CreateUserDto = {\n        email: 'example@email.com',\n        password: 'password',\n      };\n      const authRoute = new AuthRoute();\n      const app = new App([authRoute]);\n\n      return request(app.getServer()).post('/signup').send(userData);\n    });\n  });\n\n  describe('[POST] /login', () => {\n    it('response should have the Set-Cookie header with the Authorization token', async () => {\n      const userData: CreateUserDto = {\n        email: 'example1@email.com',\n        password: 'password',\n      };\n\n      const authRoute = new AuthRoute();\n      const app = new App([authRoute]);\n\n      return request(app.getServer())\n        .post('/login')\n        .send(userData)\n        .expect('Set-Cookie', /^Authorization=.+/);\n    });\n  });\n\n  // error: StatusCode : 404, Message : Authentication token missing\n  // describe('[POST] /logout', () => {\n  //   it('logout Set-Cookie Authorization=; Max-age=0', () => {\n  //     const authRoute = new AuthRoute();\n  //     const app = new App([authRoute]);\n\n  //     return request(app.getServer())\n  //       .post('/logout')\n  //       .expect('Set-Cookie', /^Authorization=\\;/);\n  //   });\n  // });\n});\n"],"names":["afterAll","Promise","resolve","setTimeout","describe","it","userData","email","password","authRoute","AuthRoute","app","App","request","getServer","post","send","expect"],"mappings":"AAAA;;;;kDAAoB,WAAW;4CACf,QAAO;kDAED,sBAAoB;;;;;;AAE1CA,QAAQ,CAAC,UAAY;IACnB,MAAM,IAAIC,OAAO,CAAOC,CAAAA,OAAO,GAAIC,UAAU,CAAC,IAAMD,OAAO,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;AACvE,CAAC,CAAC,CAAC;AAEHE,QAAQ,CAAC,cAAc,EAAE,IAAM;IAC7BA,QAAQ,CAAC,gBAAgB,EAAE,IAAM;QAC/BC,EAAE,CAAC,0CAA0C,EAAE,IAAM;YACnD,MAAMC,QAAQ,GAAkB;gBAC9BC,KAAK,EAAE,mBAAmB;gBAC1BC,QAAQ,EAAE,UAAU;aACrB,AAAC;YACF,MAAMC,SAAS,GAAG,IAAIC,UAAS,QAAA,EAAE,AAAC;YAClC,MAAMC,GAAG,GAAG,IAAIC,IAAG,QAAA,CAAC;gBAACH,SAAS;aAAC,CAAC,AAAC;YAEjC,OAAOI,IAAAA,UAAO,QAAA,EAACF,GAAG,CAACG,SAAS,EAAE,CAAC,CAACC,IAAI,CAAC,SAAS,CAAC,CAACC,IAAI,CAACV,QAAQ,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEHF,QAAQ,CAAC,eAAe,EAAE,IAAM;QAC9BC,EAAE,CAAC,yEAAyE,EAAE,UAAY;YACxF,MAAMC,QAAQ,GAAkB;gBAC9BC,KAAK,EAAE,oBAAoB;gBAC3BC,QAAQ,EAAE,UAAU;aACrB,AAAC;YAEF,MAAMC,SAAS,GAAG,IAAIC,UAAS,QAAA,EAAE,AAAC;YAClC,MAAMC,GAAG,GAAG,IAAIC,IAAG,QAAA,CAAC;gBAACH,SAAS;aAAC,CAAC,AAAC;YAEjC,OAAOI,IAAAA,UAAO,QAAA,EAACF,GAAG,CAACG,SAAS,EAAE,CAAC,CAC5BC,IAAI,CAAC,QAAQ,CAAC,CACdC,IAAI,CAACV,QAAQ,CAAC,CACdW,MAAM,CAAC,YAAY,sBAAsB,CAAC;QAC/C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AAaL,CAAC,CAAC,CAAC"}